
@model Connect4m_Web.Models.LMSproperties.RoleProp
@{
    Layout = null;
    ViewData["Title"] = "CreateRole";
    //var groupedByParentId = Model.GroupBy(item => item.ParentMenuId != "");
    ////var groupbyMenuId = Model.GroupBy(item => item.InstanceMenuId =="");
    //var item1 = groupedByParentId.FirstOrDefault();
    //var item2 = groupedByParentId.ElementAt(2);
    var item1 = ViewBag.item1 as IGrouping<bool, Connect4m_Web.Models.LMSproperties.RoleMenu>;


    var item2 = ViewBag.item2 as IGrouping<bool, Connect4m_Web.Models.LMSproperties.RoleMenu>;
    if (ViewBag.item2 != null)
    {
        var item3 = ViewBag.item3 as IGrouping<bool, Connect4m_Web.Models.LMSproperties.RoleMenu>;

    }
}

<link href="~/css/CommonStyle.css" rel="stylesheet" />
<div id="ForCreateRole">
    @*<div class="col-sm-12 ">

        <div class="card">

            <div class="card-body">
                <div class="default-according style-1" id="accordionoc">
                    <div class="card">
                        <h6><span>MANAGE ROLE</span></h6>*@


    <div class="card-header bg-primary">
        <h5 class="mb-0">
            <button class="btn btn-link text-white" @*data-bs-toggle="collapse" data-bs-target="#collapseicon" aria-expanded="true" aria-controls="collapse11"*@>
                <span style=" font-weight: 900;"></span> Save Role  <span style=" margin-left: 50%;" class="required"> INDICATES REQUIRED FIELDS.</span>

            </button>
        </h5>
    </div>

    <div class="row">
        <div class="row padding-search">


            <form id="Create_Role">
                <div class="row">
                    <input asp-for="InstanceRoleId" class="form-control" style="display:none" readonly  hidden id="instanceRoleIdcheck"/>

                    <div class="form-group col-2">
                        <label asp-for="RoleName" class="control-label space required"></label>
                    </div>
                    <div class="form-group col-4">
                        <input asp-for="RoleName" class="form-control" id="RoleNamecheck" />
                        <span asp-validation-for="RoleName" class="text-danger"></span>
                        <span class="compare"></span>

                    </div>

                    <div class="form-group col-2">
                        <input type="button" id="Checkroleavailability" class="btn btn-pill btn-outline-info btn-air-info" value="Check Availability" style=" border-radius: 15px; border: 1px solid #a99c9c !important; margin-left: 9px; height: 33px;" />
                    </div>
                    <div class="form-group col-4">

                    </div>

                    <div class="form-group col-2">
                        <label asp-for="FolderSize" class="control-label space required"></label>
                    </div>
                    <div class="form-group col-4">
                        <input asp-for="FolderSize" class="form-control" />
                        <span asp-validation-for="FolderSize" class="text-danger"></span>

                    </div>
                    <div class="form-group col-1">
                        <label class="control-label ">MB</label>

                    </div>
                    <div class="form-group col-5">

                    </div>

                    <div class="form-group col-2">
                        <label asp-for="BookingLimit" class="control-label space required"></label>
                    </div>
                    <div class="form-group col-4">
                        <select asp-for="BookingLimit" class="form-select">
                            <option value="" title="Select">--Select--</option>
                            <option value="1" title="1">1</option>
                            <option value="2" title="2">2</option>
                            <option value="3" title="3">3</option>
                            <option value="4" title="4">4</option>
                            <option value="5" title="5">5</option>
                            <option value="6" title="6">6</option>
                            <option value="7" title="7">7</option>
                            <option value="8" title="8">8</option>
                            <option value="9" title="9">9</option>
                            <option value="10" title="10">10</option>

                        </select>
                        <span asp-validation-for="BookingLimit" class="text-danger"></span>

                    </div>
                    <div class="form-group col-6">

                    </div>
                    <div class="form-group col-2">
                        <label asp-for="RoleDescirption" class="control-label space "></label>
                    </div>
                    <div class="form-group col-4">
                        <textarea asp-for="RoleDescirption" class="form-control"></textarea>
                    </div>

                    <div class="form-group col-6">

                    </div>
                    <div class="form-group col-2" style="align-items: center; display: flex;">
                        <label asp-for="MenuItems" class="control-label space required"></label>
                    </div>
                    <div class="form-group col-10" style=" border-left: 1px solid black; padding: 0px 0px 0px 4px; border-top: 1px solid black;">
                        <div style=" background-color: lightcyan; color: black; font-weight: 900; text-align: center; border: 1px solid; margin-left: -4px;"> <label class="control-label">Menu Name</label></div>

                        @foreach (var parent in item2)
                        {
                            int count = 0;
                            @for (int i = 0; i < item1.Count(); i++)
                            {
                                var child = item1.ElementAt(i);
                                if (parent.InstanceMenuId == child.ParentMenuId)
                                {
                                    count++;

                                    <div class="row" style="height: @(parent.Ischecked==1?"auto":"45px"); border-bottom: 1px solid #d0f3e8">
                                        <div class="form-group col-12" @*style=" margin-bottom: -10px;"*@>
                                            <div class="Rolecheckbox">
                                                <input type="checkbox" class="form-check-input" value="@parent.InstanceMenuId" @(parent.Ischecked == 1 ? "checked" : "")>
                                                @Html.Raw(@parent.Menuname)
                                            </div>


                                            <div class="parentcheckboxes" style="display: @(parent.Ischecked == 1 ? "contents" : "none")">
                                                <div class="row">
                                                    @for (int j = i; j < item1.Count(); j++)
                                                    {
                                                        child = item1.ElementAt(j);
                                                        if (parent.InstanceMenuId == child.ParentMenuId)
                                                        {
                                                            <div class="form-group col-1"></div>
                                                            <div class="form-group col-5">
                                                                <div class="Rolecheckboxsub">
                                                                    <input type="checkbox" class="form-check-input" value="@child.InstanceMenuId" @(child.Ischecked == 1 ? "checked" : "")>
                                                                    @child.Menuname
                                                                </div>

                                                            </div>

                                                        }

                                                    }
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    i = item1.Count();
                                }
                            }
                            if (count == 0)
                            {


                                <div class="row" @*style=" margin-bottom: -10px;"*@ style="border-bottom: 1px solid #d0f3e8; height: 45px;">
                                    <div class="form-group col-12">
                                        @if (parent.IsHomePage == 1)
                                        {
                                            <div class="Rolecheckbox">
                                                <input type="checkbox" class="form-check-input" value="@parent.InstanceMenuId" checked disabled readonly>
                                                @parent.Menuname
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="Rolecheckbox" @*style="border-bottom: 1px solid #d0f3e8"*@>
                                                <input type="checkbox" class="form-check-input" value="@parent.InstanceMenuId" @(parent.Ischecked == 1 ? "checked" : "")>
                                                @Html.Raw(@parent.Menuname)
                                            </div>
                                        }


                                    </div>
                                </div>
                            }

                        }
                    </div>

                    <div class="form-group col-4"></div>
                    <div class="form-group col-8">
                        <div style=" display: flex; gap: 22px;">
                            <input type="button" value="Back To Search" id="backtosearch_CR" class="btn btn-pill btn-outline-secondary btn-sm" />
                            <input type="reset" value="Clear" class="btn btn-pill btn-outline-warning btn-awarning" id="clearform" />

                            <input type="submit" value="Save" id="Save_CR" class="btn btn-pill btn-outline-success btn-auccess" />
                        </div>
                    </div>
                </div>



            </form>
        </div>


    </div>
</div>
@*</div>

                </div>
            </div>
        </div>
    </div>*@
<div id="ForDisplayOrder" style="display:none">

</div>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js" type="text/javascript"></script>




<script src="~/js/SearchRoles.js"></script>
