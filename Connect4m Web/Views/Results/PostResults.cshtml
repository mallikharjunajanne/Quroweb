
@model Connect4m_Web.Models.ResultsModel
@{
    ViewData["Title"] = "PostResults";
}

<!DOCTYPE html>
<html>
<head>
    @*<style>
            .Ddlstyle {
                width: 230px;
                color: black;
                font-size: inherit;
                height: 27px;
            }

            .errorboxshadow {
                box-shadow: 0 0 0 0.25rem rgb(223 16 35 / 75%);
            }


            /*this are  for design input step 3 page*/
            .thumbnailleft {
                position: relative;
                display: inline-block;
            }

                .thumbnailleft img {
                    display: none;
                    position: absolute;
                    top: 100%;
                    left: 0;
                    border: 1px solid #cbcbcb;
                    z-index: 1;
                }

                .thumbnailleft:hover img {
                    display: block;
                }
        </style>*@



</head>
<body>
    <div class="flex-grow-1 container-p-y container-fluid">

        <h4 class="py-3 mb-4"><span class="text-muted fw-light">User Module /</span>POST RESULTS</h4>

        <div class="row mb-2">
            <div class="col-md-12 col-lg-12 mb-3">

                <span class="ErrorMessageSpan text-danger" id="Main_Span_Error"></span>
                <span class="ErrorMessageSpan text-danger" id="StudentEmail_Error"></span>
                <span class="ErrorMessageSpan text-danger" id="ParentEmail_Error"></span>

                @*==========================search Users Card====================*@
                <div class="card mb-4" id="Div_Step1">

                    <div class="card-header d-flex align-items-center justify-content-between">
                        <h5 class="mb-0">
                            <span>
                                POST RESULTS
                            </span>
                        </h5>
                    </div>
                    <div class="card-body">
                        @*<form id="FmExamsCreatePage" asp-action="ManageExams" asp-controller="Examination">*@

                        <form id="FmSubjectsSearch">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div class="row">
                                <div class="col">
                                    @*<input asp-for="InstanceSubjectId" class="form-control" id="formInstanceSubjectId" hidden />*@
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label asp-for="InstanceClassificationId" class="col-sm-4 col-form-label  text-end required" for="basic-default-name"></label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select id='DdlDepartment' asp-for="InstanceClassificationId" class="select2 form-select select2-hidden-accessible" onchange="CommonDropdownFunction('GET', '/Attendance/DdlClassId_Calingfunction?InstanceClassificationId=' + this.value, 'DdlClass', 'Please select a Class', true)" asp-items="@(new SelectList(""))" required>
                                                    <option value=''>Select a Department</option>
                                                </select>
                                                <span asp-validation-for="InstanceClassificationId" class="text-danger"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label asp-for="InstanceSubClassificationId" class="col-sm-4 col-form-label  text-end required" for="basic-default-name"></label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select class="select2 form-select select2-hidden-accessible" id='DdlClass' asp-for="InstanceSubClassificationId" onchange="CommonDropdownFunction('POST','/Results/DdlSubjectTypes_Calingfunction','DdlSubjects','',false,'FmSubjectsSearch')" asp-items="@(new SelectList(""))" disabled required>
                                                    <option value=''>Please select a Class</option>
                                                </select>
                                                <span asp-validation-for="InstanceSubClassificationId" class="text-danger"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label class="col-sm-4 col-form-label  text-end required" for="basic-default-name">Subjects</label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select class="select2 form-select select2-hidden-accessible" id='DdlSubjects' multiple="multiple" asp-for="SubjectsIdString" name="SubjectsIdString" asp-items="@(new SelectList(""))" required>
                                                </select>
                                                <span asp-validation-for="SubjectsIdString" class="ErrorMessageSpan"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label class="col-sm-4 col-form-label  text-end required" for="basic-default-name">Exam Type</label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select class="select2 form-select select2-hidden-accessible" id='DdlExamtype' asp-for="ExamtypeId" name="ExamtypeId" onchange="CommonDropdownFunction('POST', '/Results/DdlExams_Callingfunction', 'DdlExam', '------Select------', true,'FmSubjectsSearch')" asp-items="@(new SelectList(""))" required>
                                                    <option value=''>Select Exam Type</option>
                                                    <option value="1">Academics</option>
                                                    <option value="2">Final Exam</option>
                                                </select>
                                                <span asp-validation-for="ExamtypeId" class="ErrorMessageSpan"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label class="col-sm-4 col-form-label  text-end required" for="basic-default-name">Exams</label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select class="select2 form-select select2-hidden-accessible" id='DdlExam' asp-for="ExamId" name="ExamId" asp-items="@(new SelectList(""))" disabled required>
                                                </select>
                                                <span asp-validation-for="ExamId" class="ErrorMessageSpan"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@
                                    <div class=" row mb-3">
                                        <label class="col-sm-4 col-form-label  text-end required" for="basic-default-name">Exam Mode</label>
                                        <div class="col-sm-4 ">
                                            <div class="position-relative">
                                                <select class="select2 form-select select2-hidden-accessible" id='DdlExammode' asp-for="ExamModeId" name="ExamModeId" asp-items="@(new SelectList(""))" required>
                                                    <option value=''>------Select------</option>
                                                </select>
                                                <span asp-validation-for="ExamModeId" class="ErrorMessageSpan"></span>
                                            </div>
                                        </div>
                                    </div>
                                    @*----------------------*@

                                    <div class=" row mb-3">
                                        <label class="col-sm-4 col-form-label  text-end " for="basic-default-name">Sort By</label>
                                        <div class="col-sm-4 ">
                                            <div class="col mt-2">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input " asp-for="SortBy" id="Name" type="radio" name="SortBy" value="0" checked="checked" />
                                                    <label class="form-check-label" for="Name">Name</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input " asp-for="SortBy" id="Registration" type="radio" name="SortBy" value="1" />
                                                    <label class="form-check-label" for="Registration"> Registration</label>
                                                </div>
                                            </div>
                                        </div>

                                        @*----------------------*@
                                        @*========================================Buttons===========================*@
                                        <div class="row justify-content-end">
                                            <div class="col-sm-8">
                                                <button type="reset" class="btn btn-warning waves-effect waves-light" id="BtnRefresh" value="Clear">Clear</button>
                                                <button type="submit" class="btn btn-success waves-effect waves-light" id="BtnNextpage_Step2" value="Go to step 2 of Post Results">Go to step 2 of Post Results</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                @*==============================This is Step 2 Card=============Searched Table==========================-*@

                <div id="Div_Step2">
                    <div class="card" id="Div_TblExamSubjects" style="display:none">
                        <label id="DepartmentName">
                            @*Step 1 Selection:JUNIOR-PROGRAM-II - A,Md-Term,NORMAL*@
                        </label>
                        <div class="card-datatable table-responsive pt-0">
                            <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
                                <div class="card-header flex-column flex-md-row">
                                    <div class="head-label text-center">
                                        <h5 class="card-title mb-0">
                                            <span>YOUR SEARCH RESULTED &nbsp;<span id="Counts" class="badge badge-center rounded-pill bg-primary bg-glow">0</span>  RECORD(S).</span>
                                        </h5>
                                    </div>
                                </div>
                                <form id="Fm_TblUser">
                                    @*<table id="LeaveLevels_SearchRecords_Table" class="table table-responsive tableid">*@
                                    <table id="TblExamSubjects" class="datatables-basic table dataTable no-footer dtr-column">
                                        <thead class="table-dark">
                                            <tr>
                                                <th>S.No</th>
                                                @*<th>ExamSubjectId</th>*@
                                                <th>Subject</th>
                                                <th>Include In Total</th>
                                                <th>Conducted Date</th>
                                                <th>Pass Marks</th>
                                                <th>Max Marks</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>


                                    @*========================================Buttons===========================*@
                                    <div class="row justify-content-end">
                                        <div class="col-sm-8">
                                            <button type="button" class="btn btn-info waves-effect waves-light" id="BtnBackTo_Step1" onclick="BackTOStep(event)" value="Go Back to Step 1">Go Back to Step 1</button>
                                            <button type="submit" class="btn btn-success waves-effect waves-light" id="BtnSave_Nextpage_Step3" value="Save & Go to Step 3">Save & Go to Step 3</button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>

                </div>

                @*==============================This is Step 3 Card=======================================-*@


                <div id="Div_Step3" style="display:none">
                    <div  id="Div_ChooseOptionFile">

                        <!--card 1 in step 3-->

                                <div class="card mb-4">
                                    <label id="DepartmentNameStep3" >
                                        @*Step 1 Selection:JUNIOR-PROGRAM-II - A,Md-Term*@
                                    </label>
                                    <div class="card-header d-flex align-items-center justify-content-between">
                                        <h5 class="mb-0">
                                            <span>
                                                CHOOSE OPTION TO SAVE
                                            </span>
                                        </h5>
                                    </div>
                                    <div class="card-body">
                                        @*<form id="FmChooseOption">*@
                                        <div class="row">
                                            <div class="col">
                                                @*-----------------------*@
                                                <div class="mb-3 row">
                                                    <label class="col-sm-4 col-form-label  text-end " for="basic-default-name">Upload File</label>
                                                    <div class="col-sm-4">
                                                        <div class="col mt-2">
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input " id="Male" type="radio" name="SortBy" value="0" checked="checked" />
                                                                <label class="form-check-label" for="RdbYes">Yes</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input " id="RdbNo" type="radio" name="SortBy" value="1" />
                                                                <label class="form-check-label" for="RdbNo"> No</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                @*-----------------------*@
                                            </div>
                                        </div>

                                        @*</form>*@
                                    </div>
                                </div>
                          

                        <div id="Div_UploadingType">
                        </div>
                    </div>
                </div>
                @*=======================end========*@



            </div>

                </div>
            </div>

                @section Scripts {
                    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
                }
</body>
</html>
<script src="https://code.jquery.com/jquery-3.6.2.min.js" integrity="sha256-2krYZKh//PcchRtd+H+VyyQoZ/e3EcrkxhM8ycwASPA=" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9.17.1/dist/sweetalert2.all.min.js"></script>

<script src="~/js/GeneralFunctions.js"></script>

<link href="~/Datatable/jquery.dataTables.css" rel="stylesheet" />
<script src="~/Datatable/jquery.dataTables.min.js"></script>

<script src="~/js/ExcelDownloading.js"></script>
<script>
    var pageTitle = '@ViewData["Title"]';
    var js = jQuery.noConflict(true);
</script>
<script src="~/js/PostResults.js"></script>
<script>

  //  var pageTitle = '@ViewData["Title"]';


    $(document).ready(function () {
    $("#loadingOverlay").show();
    debugger;
    //  TblDataTableWithColumns_CallingFunction(event, 'Stop', "/Examination/TblBulkUploadSubjectsList", 'TblBulkUploadSubjectsList', 'Counts', 'FmSubjectSearch', 'Div_TblBulkUploadSubjectsList', '', []);
    var pageTitle = '@ViewData["Title"]'
    // pageTitle is assign in PostResultsByExcel page
    if (pageTitle == "PostResultsByExcel") {
        CommonDropdownFunction('POST', '/Results/DdlExams_Callingfunction?ExamtypeId=1', 'DdlExam', '------Select------', false)
    }
   CommonDropdownFunction("GET", "/Attendance/DepartmentsDropdown_Caliingfunction", "DdlDepartment", "Select a Department", false)
    CommonDropdownFunction("GET", "/Results/DdlExamMode_Callingfunction", "DdlExammode", "------Select------", false)
    $("#loadingOverlay").hide();
    });



    //===============================  This is For save as draft and Publish Marks
//js(document).on("click", '#BtnSaveAsDraft,#BtnPublish', function (event) {


//$('#BtnSaveAsDraft,#BtnPublish').on('click', function (event) {
//   // $(document).off("click", '#BtnSaveAsDraft, #BtnPublish').on("click", '#BtnSaveAsDraft, #BtnPublish', function (event) {

//    try {
//        event.preventDefault();

//        //event.stopImmediatePropagation();
//        var ButtonName = $(this).val();
//        var ButtonId = $(this).attr("id");
//        debugger;
//        $(".ErrorMessageSpan").empty();
//        var Alertconfirm = false;
//        var HdnSubjectNamesForAlertMsg = $("#HdnSubjectNamesForAlertMsg").val();
//        if (HdnSubjectNamesForAlertMsg != "" && ButtonId == "BtnSaveAsDraft") {
//            Swal.fire({
//                title: "Are you sure?",
//                text: ("For Subject(s) '" + HdnSubjectNamesForAlertMsg.slice(0, -1) + "' marks are already published. Do you want to save the published marks as draft? "),
//                //type: "warning", -  doesn't exist
//                showCancelButton: true,
//                showCloseButton: true, // optional
//                showConfirmButton: true, // optional
//                confirmButtonColor: '#d33',
//                confirmButtonText: "Yes",
//                icon: "warning",
//                //closeOnConfirm: false -  doesn't exist
//            })
//                .then(function (isConfirm) {
//                    if (isConfirm.isConfirmed) {
//                        Alertconfirm = true;
//                        SaveAsdraftCallingFunction(ButtonId, ButtonName);
//                    }
//                    else {
//                        return; //close popup
//                    }
//                });
//        }
//        if (Alertconfirm || HdnSubjectNamesForAlertMsg == "" || ButtonId == "BtnPublish") {
//            SaveAsdraftCallingFunction(ButtonId, ButtonName);
//        }
//    } catch (e) {
//        $("#loadingOverlay").hide();
//        $("#Main_Span_Error").text("Something Error");
//    }
//});

////===============================  This is For save as draft and Publish Marks calling function
//function SaveAsdraftCallingFunction(ButtonId, ButtonName) {
//    try {
//        debugger;
//        $("#loadingOverlay").show();
//        var formData = new FormData($("#FmSubjectsSearch")[0]);

//        formData.append("ButtonId", ButtonId);
//        formData.append("EMAILtoParents", $("#chkEMAILPARENTS").is(':checked'));
//        formData.append("EMAILtoStudents", $("#chkEMAILSTUDENTS").is(':checked'));
//        formData.append("SMStoParent", $("#chkSMSParent").is(':checked'));
//        formData.append("SMStoStudent", $("#chkSMSStudent").is(':checked'));

//        var formExists = $('#FmFileUpload').length > 0;
//        var FmFileUpload = "";
//        if (formExists) {
//            var selectedValues = $("#DdlSubjects option:selected").map(function () {
//                return $(this).text();
//            }).get();
//            if (selectedValues) {
//                var selectedValuesString = selectedValues.join(", ");
//            }
//            formData.append("SubjectsName", selectedValuesString);

//            var userIdsString = $("#userIdsContainer").data("user-ids");
//            var userIdsArray = userIdsString.split(',').map(Number);
//            var l = userIdsArray.length;
//            for (var i = 0; i < l; i++) {
//                formData.append("UseridList", userIdsArray[i]);
//            }
//            //Step 2 table is values getting  here
//            FmFileUpload = "FmFileUpload";
//            $('#TblExamSubjects tbody tr').each(function () {
//                var ExamSubjectId = $(this).find('td #ExamSubjectId').val();
//                var PassMarks = $(this).find('td #TxtPassMarks').val();
//                var MaxMarks = $(this).find('td #TxtMaxMarks').val();

//                formData.append("SubjectIdList", parseInt(ExamSubjectId) || 0);
//                formData.append("PassMarksList", parseFloat(PassMarks));
//                formData.append("MaxMarksList", parseFloat(MaxMarks));
//            });

//            performCrudOperationCommonFunction('POST', "/Results/PublishResults?ButtonName=" + ButtonName + "&FmFileUpload=" + FmFileUpload, formData, function (response) {
//                // Handle response if needed
//                debugger;
//                if (response.message == "Something Error") {
//                    $("#Main_Span_Error").text(response.message);
//                }
//                else {
//                    var jsonResponse = JSON.parse(response.message);
//                    // var SuccessMSG = jsonResponse.successMSG;

//                    if (jsonResponse.successMSG == "Results Posted successfully.") {
//                        $("#Main_Span_Error").text(jsonResponse.successMSG);
//                        if ($("#chkEMAILSTUDENTS").is(':checked')) {
//                            $("#StudentEmail_Error").text(jsonResponse.emailNotAvailableStudentNames + "  No EMail Id Exists for Students(s).");
//                        }
//                        if ($("#chkEMAILPARENTS").is(':checked')) {
//                            $("#ParentEmail_Error").text(jsonResponse.emailNotAvailableParentNames + "  No EMail Id Exists for Parent(s).");
//                        }
//                        if ($("#chkSMSStudent").is(':checked')) {
//                            $("#StudentSMS_Error").text("For User(s) " + jsonResponse.phoneNotAvailableStudent + " No Mobile Number Exists for Student(s).");
//                        }
//                        if ($("#chkSMSParent").is(':checked')) {
//                            $("#ParentSMS_Error").text("For User(s) " + jsonResponse.phoneNotAvailableParent + "  No Mobile Number Exists for Parent(s).");
//                        }
//                        $("#BtnPublish").prop("disabled", true);
//                        $("#BtnSaveAsDraft").prop("disabled", true);
//                    } else {
//                        $("#Main_Span_Error").text(jsonResponse.successMSG);
//                    }
//                }
//                $("#loadingOverlay").hide();
//                window.scrollTo(0, 0);
//            }, function (error) {
//                // Handle error if needed
//                $("#loadingOverlay").hide();
//                $("#Main_Span_Error").text("Something Error");
//            }, true);


//        }
//        else {
//            var TblExamSubject = $("#TblUsersSearched tbody tr");
//            TblExamSubject.find('input[type="text"]').removeClass("errorboxshadow");

//            var SecuredMarks;
//            var shouldExit = false;
//            var MaxMarks;
//            var Grade;
//            $('#TblUsersSearched tbody tr').each(function () {
//                if (shouldExit) {
//                    return false; // Exit the outer loop
//                }
//                var UserId = $(this).find('#UserId').val();
//                var Name = $(this).find("td:eq(1)").text();
//                $(this).find('td').each(function (tdIndex) {
//                    if (tdIndex < 3) {
//                        return;
//                    }
//                    SecuredMarks = $(this).find('input[type="text"]').val();
//                    ExamSubjectId = $('#TblUsersSearched thead th:eq(' + tdIndex + ')  #TH_ExamSubjectId').val();
//                    MaxMarks = $('#TblUsersSearched thead th:eq(' + tdIndex + ')  #TH_MaxMarks').val();
//                    PassMarks = $('#TblUsersSearched thead th:eq(' + tdIndex + ')  #TH_PassMarks').val();
//                    SubjectName = $('#TblUsersSearched thead th:eq(' + tdIndex + ')').text();

//                    //use this if you add this in js file
//                    // let hasAlphabetsOrSpecialCharacters = /[^a-zA-Z0-9]|[!#$%^&*(),.?":{}<>]/.test(SecuredMarks);
//                    let hasAlphabetsOrSpecialCharacters;


//                        if (SecuredMarks === "" && !$(this).find('input[type="text"]').prop('disabled') && ButtonId != "BtnSaveAsDraft") {
//                            $(ErrorAppend).text("Please enter marks For student '" + Name + "' for subject  '" + SubjectName + "'");
//                            $(this).find('input[type="text"]').addClass("errorboxshadow").focus();
//                        shouldExit = true; // Set the flag to true to exit the loops
//                        return false; // Exit the inner loop
//                    }
//                    //use this if you add this in js file
//                    else if (SecuredMarks != "O" && SecuredMarks != "-" && hasAlphabetsOrSpecialCharacters) {
//                          $(ErrorAppend).text("Please enter valid data For student '" + Name + "' for subject  '" + SubjectName + "'");
//                            $(this).find('input[type="text"]').addClass("errorboxshadow").focus();
//                          shouldExit = true; // Set the flag to true to exit the loops
//                          return false; // Exit the inner loop
//                      }
//                    else if (parseFloat(MaxMarks) < parseFloat(SecuredMarks)) {
//                        $(ErrorAppend).text("For student '" + Name + "' secured marks can not be greater than maximum marks for subject '" + SubjectName + "'");
//                            $(this).find('input[type="text"]').addClass("errorboxshadow").focus();
//                        shouldExit = true; // Set the flag to true to exit the loops
//                        return false; // Exit the inner loop
//                    }
//                    if (parseFloat(PassMarks) <= parseFloat(SecuredMarks) && SecuredMarks != "") {
//                        Grade = "PASS";
//                    } else if (parseFloat(PassMarks) > parseFloat(SecuredMarks) && SecuredMarks != "") {
//                        Grade = "FAIL";
//                    } else if (SecuredMarks == "-") {
//                        Grade = "ABSENT";
//                        //Grade = "OPTIONAL";
//                    } else if (SecuredMarks == "" && ButtonId == "BtnPublish") {
//                        Grade = "OPTIONAL";
//                    } else {
//                        Grade = "";
//                    }
//                    formData.append("UseridList", parseInt(UserId) || 0);
//                    formData.append("SubjectIdList", parseInt(ExamSubjectId) || 0);
//                    formData.append("SecureMarksList", parseFloat(SecuredMarks) || "");
//                    formData.append("GradeList", Grade || "");
//                    formData.append("PassMarksList", parseFloat(PassMarks));
//                    formData.append("MaxMarksList", parseFloat(MaxMarks));
//                });
//            });
//            if (shouldExit) {
//                window.scrollTo(0, 0);
//                $('.alert-danger p').text("Please Enter Valid Data.");
//                $(".alert-danger").show().delay(5000).fadeOut()
//                $("#loadingOverlay").hide();
//                return;
//            }


            
//            performCrudOperationCommonFunction('POST', "/Results/PublishResults?ButtonName=" + ButtonName + "&FmFileUpload=" + FmFileUpload, formData, function (response) {
//                    // Handle response if needed
//                    debugger;
//                    if (response.message == "Something Error") {
//                        $("#Main_Span_Error").text(response.message);
//                    }
//                    else {
//                        var jsonResponse = JSON.parse(response.message);
//                        // var SuccessMSG = jsonResponse.successMSG;

//                        if (jsonResponse.successMSG == "Results Posted successfully.") {
//                            $("#Main_Span_Error").text(jsonResponse.successMSG);
//                            if ($("#chkEMAILSTUDENTS").is(':checked')) {
//                                $("#StudentEmail_Error").text(jsonResponse.emailNotAvailableStudentNames + "  No EMail Id Exists for Students(s).");
//                            }
//                            if ($("#chkEMAILPARENTS").is(':checked')) {
//                                $("#ParentEmail_Error").text(jsonResponse.emailNotAvailableParentNames + "  No EMail Id Exists for Parent(s).");
//                            }
//                            if ($("#chkSMSStudent").is(':checked')) {
//                                $("#StudentSMS_Error").text("For User(s) " + jsonResponse.phoneNotAvailableStudent + " No Mobile Number Exists for Student(s).");
//                            }
//                            if ($("#chkSMSParent").is(':checked')) {
//                                $("#ParentSMS_Error").text("For User(s) " + jsonResponse.phoneNotAvailableParent + "  No Mobile Number Exists for Parent(s).");
//                            }
//                            $("#BtnPublish").prop("disabled", true);
//                            $("#BtnSaveAsDraft").prop("disabled", true);
//                        } else {
//                            $("#Main_Span_Error").text(jsonResponse.successMSG);
//                        }
//                    }
//                    $("#loadingOverlay").hide();
//                    window.scrollTo(0, 0);
//                    // Move on to the next chunk
//                    sendChunk(index + 1);
//                }, function (error) {
//                    // Handle error if needed
//                    $("#loadingOverlay").hide();
//                    $("#Main_Span_Error").text("Something Error");
//                    // Move on to the next chunk
//                    sendChunk(index + 1);
//                }, true);
            



//        }
//    } catch (e) {
//        $("#loadingOverlay").hide();
//        $("#Main_Span_Error").text("Something Error");
//    }
//}

</script>





